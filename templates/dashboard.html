<!DOCTYPE html>
<link rel="stylesheet" href="/static/style.css">
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ResumeParse Dashboard</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    table { border-collapse: collapse; width: 100%; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    th { background: #eee; }
    .actions { margin-top: 2rem; }
  </style>
</head>
<body>
  <h1>ResumeParse Admin Dashboard</h1>
  <p><a href="/logout">Logout</a></p>

  <div class="actions">
    <h2>Subscribe to a Plan</h2>
    <form action="/create_checkout_session" method="post">
      <button type="submit" name="plan" value="basic">Subscribe to Basic ($10/mo)</button>
      <button type="submit" name="plan" value="pro">Subscribe to Pro ($25/mo)</button>
    </form>
  </div>

  <div class="keys">
    <h2>Issued API Keys</h2>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Email</th>
          <th>Quota</th>
          <th>Used</th>
          <th>Customer ID</th>
          <th>Manage</th>
        </tr>
      </thead>
      <tbody>
        {% for key in keys %}
        <tr>
          <td>{{ key["key"] }}</td>
          <td>{{ key["email"] }}</td>
          <td>{{ key["quota"] }}</td>
          <td>{{ key["used"] }}</td>
          <td>{{ key["customer_id"] }}</td>
          <td>
            <form action="/create_customer_portal_session" method="post">
              <input type="hidden" name="email" value="{{ key['email'] }}">
              <button type="submit">Manage</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>

<h2>Subscribe to ResumeParse</h2>
<form action="/create_checkout_session" method="post">
  <button name="plan" value="basic" type="submit">Subscribe - Basic ($10/mo)</button>
  <button name="plan" value="pro" type="submit">Subscribe - Pro ($25/mo)</button>
</form>


</html>
